{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Standard Tooling","text":"<p>Standard-tooling is a Python package and script collection providing shared development tooling for all managed repositories. It delivers CLI tools for commits, PRs, releases, and validation alongside bash validators and git hooks -- all consumed via PATH.</p>"},{"location":"#components","title":"Components","text":"<p>Python CLI tools (<code>src/standard_tooling/</code>): <code>st-commit</code>, <code>st-submit-pr</code>, <code>st-prepare-release</code>, <code>st-finalize-repo</code>, <code>st-validate-local</code></p> <p>Bash validators (<code>scripts/bin/</code>): <code>commit-message</code>, <code>repo-profile</code>, <code>markdown-standards</code>, <code>pr-issue-linkage</code>, validation drivers</p> <p>Git hooks (<code>scripts/lib/git-hooks/</code>): Branch naming enforcement, commit message validation</p>"},{"location":"#design-principles","title":"Design Principles","text":"<ul> <li>Portability -- scripts run on both macOS and Linux</li> <li>shellcheck clean -- all shell scripts pass shellcheck</li> <li>No repo-specific logic -- every script works in any consuming   repository</li> <li>PATH-based consumption -- consuming repos add standard-tooling to   PATH rather than copying files</li> </ul>"},{"location":"#how-it-works","title":"How It Works","text":"<ol> <li>Standard-tooling is cloned as a sibling directory (local development)    or checked out in CI (GitHub Actions).</li> <li>The Python package is installed via <code>uv sync</code>, making <code>st-*</code> CLI    tools available in <code>.venv/bin/</code>.</li> <li>Both <code>.venv/bin/</code> and <code>scripts/bin/</code> are added to PATH.</li> <li>Git hooks are configured to point at <code>scripts/lib/git-hooks/</code>.</li> <li>Consuming repos call tools by bare name -- no file copying or syncing.</li> </ol>"},{"location":"#quick-links","title":"Quick Links","text":"<ul> <li>Getting Started -- set up a consuming repository</li> <li>Script Reference -- documentation for each tool</li> <li>Validation Matrix -- which checks run where</li> </ul>"},{"location":"changelog/","title":"Changelog","text":"<p>All notable changes to this project will be documented in this file.</p> <p>The format is based on Keep a Changelog and this project adheres to Semantic Versioning.</p>"},{"location":"changelog/#121-2026-02-26","title":"[1.2.1] - 2026-02-26","text":""},{"location":"changelog/#bug-fixes","title":"Bug fixes","text":"<ul> <li>resolve commit-msg hook fallback relative to hook directory, not consuming repo (#90)</li> <li>disable fail-fast in docker-publish matrix (#100)</li> <li>bump Go dev images from 1.23 to 1.25 and 1.26 (#105)</li> <li>use v2 module path for go-licenses (#107)</li> <li>use hadolint binary instead of container to avoid musl/node24 incompatibility (#122)</li> <li>suppress DL3028 hadolint warning for gem version pinning (#123)</li> <li>exclude auto-generated markdown from markdownlint (#125)</li> <li>add SHELL pipefail directive to all Dockerfiles (#127)</li> <li>expand trivyignore with upstream-unfixable CVEs (#128)</li> </ul>"},{"location":"changelog/#ci","title":"CI","text":"<ul> <li>migrate CI to three-tier model (#112)</li> </ul>"},{"location":"changelog/#documentation","title":"Documentation","text":"<ul> <li>add three-tier CI architecture guide (#109)</li> </ul>"},{"location":"changelog/#features","title":"Features","text":"<ul> <li>add Ruby ecosystem detection to st-prepare-release (#88)</li> <li>add st-observatory CLI for cross-repo health reports (#91)</li> <li>allow dots in branch name validation (#93)</li> <li>add Docker dev images and docker-test script (#96)</li> <li>publish dev container images to GHCR (#98)</li> <li>add shellcheck and markdownlint to all dev images (#110)</li> <li>generate per-release verbose release notes files (#114)</li> <li>add CI quality gates for dev container images (#121)</li> <li>harden dev images with patched base packages, Node 22 LTS, shellcheck 0.11.0 (#126)</li> </ul>"},{"location":"changelog/#refactoring","title":"Refactoring","text":"<ul> <li>remove --docs-only flag from st-submit-pr (#117)</li> </ul>"},{"location":"changelog/#120-2026-02-23","title":"[1.2.0] - 2026-02-23","text":""},{"location":"changelog/#bug-fixes_1","title":"Bug fixes","text":"<ul> <li>update add-to-project action to v1.0.2 (#64)</li> <li>read version from pyproject.toml in publish and docs workflows (#82)</li> </ul>"},{"location":"changelog/#documentation_1","title":"Documentation","text":"<ul> <li>document git hooks and validation rules (#71)</li> <li>add MkDocs documentation site (#72)</li> <li>update documentation site for PATH-based architecture (#79)</li> </ul>"},{"location":"changelog/#features_1","title":"Features","text":"<ul> <li>add chore/ as allowed branch prefix in pre-commit hook (#66)</li> <li>restructure as Python package with PATH-based consumption (#73)</li> <li>add commit-messages range validator for CI (#76)</li> </ul>"},{"location":"changelog/#refactoring_1","title":"Refactoring","text":"<ul> <li>remove commit-messages range validator (#77)</li> </ul>"},{"location":"changelog/#testing","title":"Testing","text":"<ul> <li>achieve 100% line and branch coverage for all Python modules (#74)</li> </ul>"},{"location":"changelog/#114-2026-02-21","title":"[1.1.4] - 2026-02-21","text":""},{"location":"changelog/#bug-fixes_2","title":"Bug fixes","text":"<ul> <li>fix CHANGELOG.md formatting for markdownlint compliance</li> <li>fix CHANGELOG.md formatting for markdownlint compliance</li> <li>fix CHANGELOG.md formatting for markdownlint compliance</li> <li>fix CHANGELOG.md formatting for markdownlint compliance</li> <li>validate CHANGELOG.md with markdownlint before committing (#55)</li> <li>allow merge commits through commit-msg hook (#57)</li> </ul>"},{"location":"changelog/#features_2","title":"Features","text":"<ul> <li>annotate synced scripts with provenance comments (#58)</li> </ul>"},{"location":"changelog/#113-2026-02-21","title":"[1.1.3] - 2026-02-21","text":""},{"location":"changelog/#bug-fixes_3","title":"Bug fixes","text":"<ul> <li>strip ^{} suffix from dereferenced tags in sync-tooling.sh (#51)</li> </ul>"},{"location":"changelog/#112-2026-02-21","title":"[1.1.2] - 2026-02-21","text":""},{"location":"changelog/#bug-fixes_4","title":"Bug fixes","text":"<ul> <li>handle empty docsite_files array with set -u</li> <li>prevent --actions-compat from leaking during self-update re-exec</li> <li>accept cross-repo issue references in PR linkage check (#36)</li> </ul>"},{"location":"changelog/#documentation_2","title":"Documentation","text":"<ul> <li>add canonical source comment to repo-profile.sh</li> <li>document release-before-sync requirement (#20)</li> <li>ban MEMORY.md usage in CLAUDE.md (#32)</li> <li>ban heredocs in shell commands (#33)</li> </ul>"},{"location":"changelog/#features_3","title":"Features","text":"<ul> <li>initial scaffold with reconciled canonical scripts</li> <li>add CI workflow, CLAUDE.md, and repository infrastructure (#6)</li> <li>add add-to-project workflow for standards project</li> <li>add GitHub Project helper scripts for skill automation (#12)</li> <li>add ci and build to allowed conventional commit types (#13)</li> <li>add commit and PR submission wrapper scripts (#17)</li> <li>support cross-repo issue references (#23)</li> <li>add VERSION file detector to prepare_release.py (#27)</li> <li>add category prefixes to CI job names (#31)</li> <li>add validate_local.sh dispatch architecture (#34)</li> <li>validate issue-linked branch names in pre-commit hook (#44)</li> <li>add publish workflow for automated tagging and version bumps (#46)</li> </ul>"},{"location":"getting-started/","title":"Getting Started","text":"<p>This guide covers setting up a consuming repository to use standard-tooling.</p>"},{"location":"getting-started/#prerequisites","title":"Prerequisites","text":"<ul> <li>Git</li> <li>Bash (macOS or Linux)</li> <li>uv: Python package manager</li> <li>markdownlint-cli:   <code>npm install --global markdownlint-cli</code></li> <li>shellcheck: <code>brew install shellcheck</code></li> </ul>"},{"location":"getting-started/#initial-setup","title":"Initial Setup","text":""},{"location":"getting-started/#1-clone-standard-tooling","title":"1. Clone standard-tooling","text":"<p>Clone standard-tooling as a sibling directory alongside your repository:</p> <pre><code>git clone https://github.com/wphillipmoore/standard-tooling.git\n</code></pre>"},{"location":"getting-started/#2-install-the-python-package","title":"2. Install the Python package","text":"<pre><code>cd standard-tooling\nuv sync\n</code></pre> <p>This installs the <code>st-*</code> CLI tools into <code>.venv/bin/</code>.</p>"},{"location":"getting-started/#3-add-standard-tooling-to-path","title":"3. Add standard-tooling to PATH","text":"<p>From your consuming repository:</p> <pre><code>export PATH=\"../standard-tooling/.venv/bin:../standard-tooling/scripts/bin:$PATH\"\n</code></pre> <p>This makes both the Python CLI tools (<code>st-commit</code>, <code>st-submit-pr</code>, etc.) and bash validators (<code>repo-profile</code>, <code>markdown-standards</code>, etc.) available by bare name.</p>"},{"location":"getting-started/#4-configure-git-hooks","title":"4. Configure git hooks","text":"<pre><code>git config core.hooksPath ../standard-tooling/scripts/lib/git-hooks\n</code></pre> <p>This tells git to use the standard-tooling hooks for branch naming and commit message validation.</p>"},{"location":"getting-started/#5-create-a-repository-profile","title":"5. Create a repository profile","text":"<p>Create <code>docs/repository-standards.md</code> with the required attributes:</p> <pre><code># Repository Standards\n\n## Table of Contents\n\n- [Repository profile](#repository-profile)\n\n## Repository profile\n\n- repository_type: &lt;application|library|tooling|documentation&gt;\n- versioning_scheme: &lt;semver|calver|none&gt;\n- branching_model: &lt;library-release|application-promotion|docs-single-branch&gt;\n- release_model: &lt;tagged-release|continuous-deploy|none&gt;\n- supported_release_lines: &lt;number&gt;\n- primary_language: &lt;python|go|java|shell|none&gt;\n</code></pre>"},{"location":"getting-started/#6-verify","title":"6. Verify","text":"<p>Run a validator to confirm everything is wired up:</p> <pre><code>repo-profile\n</code></pre>"},{"location":"getting-started/#next-steps","title":"Next Steps","text":"<ul> <li>Read the Consuming Repo Setup guide for   detailed onboarding instructions including CI configuration</li> <li>See the Script Reference for documentation on each   tool</li> <li>Review the Validation Matrix to understand   which checks run where</li> </ul>"},{"location":"guides/consuming-repo-setup/","title":"Consuming Repo Setup","text":"<p>This guide walks through end-to-end onboarding of a new repository to use standard-tooling via PATH-based consumption.</p>"},{"location":"guides/consuming-repo-setup/#prerequisites","title":"Prerequisites","text":"<p>Install the required tools:</p> <p>macOS:</p> <pre><code>brew install shellcheck uv\nnpm install --global markdownlint-cli\n</code></pre> <p>Linux:</p> <pre><code>sudo apt-get install shellcheck\nnpm install --global markdownlint-cli\n# Install uv: https://docs.astral.sh/uv/getting-started/installation/\n</code></pre>"},{"location":"guides/consuming-repo-setup/#step-1-clone-standard-tooling","title":"Step 1: Clone Standard-Tooling","text":"<p>Clone the canonical source as a sibling directory:</p> <pre><code>cd ..\ngit clone \\\n  https://github.com/wphillipmoore/standard-tooling.git\ncd standard-tooling\nuv sync\ncd ../your-repo\n</code></pre>"},{"location":"guides/consuming-repo-setup/#step-2-configure-path-and-hooks","title":"Step 2: Configure PATH and Hooks","text":"<p>Add standard-tooling to PATH and configure git hooks:</p> <pre><code>export PATH=\"../standard-tooling/.venv/bin:../standard-tooling/scripts/bin:$PATH\"\ngit config core.hooksPath ../standard-tooling/scripts/lib/git-hooks\n</code></pre> <p>Tip</p> <p>Add the PATH export to your shell profile or project's setup documentation so it persists across sessions.</p>"},{"location":"guides/consuming-repo-setup/#step-3-create-the-repository-profile","title":"Step 3: Create the Repository Profile","text":"<p>Create <code>docs/repository-standards.md</code> in your repository. This file is read by multiple validators for configuration.</p> <p>Required sections:</p> <pre><code># Repository Standards\n\n## Table of Contents\n\n- [AI co-authors](#ai-co-authors)\n- [Repository profile](#repository-profile)\n\n## AI co-authors\n\n- Co-Authored-By: your-codex &lt;email&gt;\n- Co-Authored-By: your-claude &lt;email&gt;\n\n## Repository profile\n\n- repository_type: library\n- versioning_scheme: semver\n- branching_model: library-release\n- release_model: tagged-release\n- supported_release_lines: 1\n- primary_language: python\n</code></pre>"},{"location":"guides/consuming-repo-setup/#step-4-add-ci-workflow","title":"Step 4: Add CI Workflow","text":"<p>Use the <code>standard-actions</code> composite action in your CI workflow:</p> <pre><code>- name: Validate standards\n  uses: wphillipmoore/standard-actions/actions/standards-compliance@develop\n</code></pre> <p>The action checks out standard-tooling, adds it to PATH, and runs:</p> <ul> <li><code>repo-profile</code> -- validates the repository profile</li> <li><code>markdown-standards</code> -- validates markdown formatting</li> <li><code>pr-issue-linkage</code> -- validates PR issue linkage (on PRs only)</li> </ul> <p>See <code>standard-actions</code> for reusable workflow actions.</p>"},{"location":"guides/consuming-repo-setup/#step-5-create-markdownlint-config","title":"Step 5: Create Markdownlint Config","text":"<p>Create <code>.markdownlint.yaml</code> at the repository root:</p> <pre><code>default: true\nno-duplicate-heading:\n  siblings_only: true\n</code></pre>"},{"location":"guides/consuming-repo-setup/#step-6-verify","title":"Step 6: Verify","text":"<pre><code># Verify repo profile\nrepo-profile\n\n# Verify markdown\nmarkdown-standards\n\n# Verify hooks work\ngit checkout -b feature/1-test-setup\necho \"test\" &gt;&gt; test.txt\ngit add test.txt\nst-commit \\\n  --type chore --message \"test setup\" --agent claude\n</code></pre>"},{"location":"guides/consuming-repo-setup/#keeping-up-to-date","title":"Keeping Up to Date","text":"<p>Standard-tooling is consumed via PATH, so updates are picked up automatically when you pull the latest version:</p> <pre><code>cd ../standard-tooling\ngit pull\nuv sync\n</code></pre> <p>For CI, the <code>standard-actions</code> composite action pins to a <code>standard-tooling-ref</code> (default: <code>develop</code>). To pin to a stable release, set the input:</p> <pre><code>- uses: wphillipmoore/standard-actions/actions/standards-compliance@develop\n  with:\n    standard-tooling-ref: v1.2\n</code></pre> <p>See the Releasing guide for the full release workflow.</p>"},{"location":"guides/releasing/","title":"Releasing","text":"<p>This guide covers the release workflow for standard-tooling.</p>"},{"location":"guides/releasing/#release-workflow","title":"Release Workflow","text":""},{"location":"guides/releasing/#1-develop-changes","title":"1. Develop Changes","text":"<p>All changes start as feature PRs targeting <code>develop</code>:</p> <pre><code>git checkout -b feature/42-add-new-check\n# ... make changes ...\nst-commit \\\n  --type feat --message \"add new check\" --agent claude\nst-submit-pr \\\n  --issue 42 --summary \"Add new check\"\n</code></pre>"},{"location":"guides/releasing/#2-prepare-the-release","title":"2. Prepare the Release","text":"<p>Once <code>develop</code> has all changes for the release, run:</p> <pre><code>st-prepare-release --issue 50\n</code></pre> <p>This tool:</p> <ul> <li>Creates a <code>release/{version}</code> branch from develop</li> <li>Merges main to incorporate prior release history</li> <li>Generates the changelog via git-cliff</li> <li>Creates a PR to main with auto-merge enabled</li> </ul>"},{"location":"guides/releasing/#3-post-merge-automation","title":"3. Post-Merge Automation","text":"<p>After the release PR merges to main, CI automation handles:</p> <ul> <li>Creating and pushing the <code>v{version}</code> tag</li> <li>Creating the GitHub Release</li> <li>Publishing the package artifact</li> <li>Deploying documentation</li> <li>Creating an automated version bump PR to develop</li> </ul>"},{"location":"guides/releasing/#4-finalize","title":"4. Finalize","text":"<p>Clean up local state:</p> <pre><code>st-finalize-repo\n</code></pre>"},{"location":"guides/releasing/#consuming-repo-updates","title":"Consuming Repo Updates","text":"<p>Standard-tooling is consumed via PATH, so consuming repos pick up updates automatically when their sibling checkout is updated:</p> <pre><code>cd ../standard-tooling\ngit pull\nuv sync\n</code></pre> <p>For CI, consuming repos use <code>standard-actions</code> which pins to a <code>standard-tooling-ref</code>. After tagging a new release, update the default ref in the <code>standards-compliance</code> action.</p>"},{"location":"guides/releasing/#version-detection","title":"Version Detection","text":"<p><code>st-prepare-release</code> auto-detects the version from the project ecosystem:</p> Ecosystem Source Python <code>pyproject.toml</code> Maven <code>pom.xml</code> Go <code>**/version.go</code> Fallback <code>VERSION</code> file"},{"location":"guides/releasing/#documentation-deployment","title":"Documentation Deployment","text":"<p>The documentation site deploys automatically on pushes to <code>develop</code> and <code>main</code> via <code>.github/workflows/docs.yml</code>. The version displayed in the site is derived from the project version using major.minor.</p>"},{"location":"guides/three-tier-ci/","title":"Three-Tier CI Architecture","text":"<p>This guide explains the three-tier continuous integration model used across all <code>mq-rest-admin-*</code> repositories, and how to implement it in new projects.</p>"},{"location":"guides/three-tier-ci/#table-of-contents","title":"Table of Contents","text":"<ul> <li>Overview</li> <li>Tier 1: Local pre-commit</li> <li>Tier 2: Push CI</li> <li>Tier 3: PR CI</li> <li>Architecture</li> <li>Implementation guide</li> <li>CI gates</li> <li>Dev container images</li> </ul>"},{"location":"guides/three-tier-ci/#overview","title":"Overview","text":"<p>Testing is split into three tiers with increasing scope, cost, and feedback latency:</p> Tier Trigger Time Security 1 Manual (before commit) Seconds No 2 Push to feature branch ~3-5 min No 3 Pull request ~8-10 min Yes <ul> <li>Tier 1: Single version, unit tests only</li> <li>Tier 2: Single version, unit + integration tests</li> <li>Tier 3: Full version matrix, all checks</li> </ul> <p>The goal is fast local feedback for the developer, rapid push-to-CI validation before PR submission, and comprehensive gated checks on the PR itself.</p>"},{"location":"guides/three-tier-ci/#tier-1-local-pre-commit","title":"Tier 1: Local pre-commit","text":"<p>Run in a dev container on the developer's machine. Docker is the only host prerequisite.</p> <pre><code>./scripts/dev/test.sh        # Unit tests + linting\n./scripts/dev/lint.sh        # Lint and formatting checks\n./scripts/dev/audit.sh       # Dependency and license audit\n</code></pre> <p>Each script follows the same pattern:</p> <ol> <li>Set <code>DOCKER_DEV_IMAGE</code> (default: <code>dev-&lt;language&gt;:&lt;latest-version&gt;</code>)</li> <li>Set <code>DOCKER_TEST_CMD</code> (language-specific command)</li> <li>Delegate to <code>docker-test</code> if available, otherwise run <code>docker run</code>    directly</li> </ol> <p>Environment overrides:</p> <ul> <li><code>DOCKER_DEV_IMAGE</code> \u2014 use a different container image</li> <li><code>DOCKER_TEST_CMD</code> \u2014 override the test command</li> </ul> <p>Tip</p> <p>Build the dev images locally before first use: <code>cd ../standard-tooling &amp;&amp; docker/build.sh</code></p>"},{"location":"guides/three-tier-ci/#tier-2-push-ci","title":"Tier 2: Push CI","text":"<p>Triggers automatically on push to <code>feature/**</code>, <code>bugfix/**</code>, <code>hotfix/**</code>, or <code>chore/**</code> branches.</p> <p>What runs:</p> <ul> <li>Unit tests (single latest version)</li> <li>Integration tests (single latest version)</li> <li>Dependency audit</li> </ul> <p>What is skipped:</p> <ul> <li>Security scanners (CodeQL, Trivy, Semgrep)</li> <li>Standards compliance</li> <li>Release gates</li> <li>Full version matrix</li> </ul> <p>The workflow file is <code>.github/workflows/ci-push.yml</code>, a thin wrapper that calls <code>ci.yml</code> with restricted inputs:</p> <pre><code>name: CI (push)\n\non:\n  push:\n    branches:\n      - \"feature/**\"\n      - \"bugfix/**\"\n      - \"hotfix/**\"\n      - \"chore/**\"\n\npermissions:\n  contents: read\n  security-events: write\n\njobs:\n  ci:\n    uses: ./.github/workflows/ci.yml\n    permissions:\n      contents: read\n      security-events: write\n    with:\n      versions: '[\"&lt;latest&gt;\"]'\n      integration-matrix: '[{...single entry...}]'\n      run-security: \"false\"\n      run-release-gates: \"false\"\n</code></pre>"},{"location":"guides/three-tier-ci/#tier-3-pr-ci","title":"Tier 3: PR CI","text":"<p>Triggers on <code>pull_request</code> events. Runs the full validation suite.</p> <p>What runs:</p> <ul> <li>Unit tests across the full version matrix</li> <li>Integration tests across the full version matrix</li> <li>Security scanners (CodeQL, Trivy, Semgrep) via shared reusable workflow</li> <li>Standards compliance</li> <li>Dependency audit</li> <li>Release gates (version divergence, format validation)</li> </ul> <p>The workflow file is <code>.github/workflows/ci.yml</code>, which doubles as both the direct PR trigger and a reusable workflow via <code>workflow_call</code>.</p>"},{"location":"guides/three-tier-ci/#architecture","title":"Architecture","text":""},{"location":"guides/three-tier-ci/#reusable-workflow-pattern","title":"Reusable workflow pattern","text":"<p><code>ci.yml</code> accepts <code>workflow_call</code> with inputs that control scope:</p> Input Type Default <code>versions</code> string (JSON) Full matrix <code>integration-matrix</code> string (JSON) Full matrix <code>run-security</code> string <code>\"true\"</code> <code>run-release-gates</code> string <code>\"true\"</code> <ul> <li><code>versions</code> \u2014 language versions to test</li> <li><code>integration-matrix</code> \u2014 test entries with ports</li> <li><code>run-security</code> \u2014 enable security scanners</li> <li><code>run-release-gates</code> \u2014 enable release gate checks</li> </ul> <p>When triggered directly by <code>pull_request</code>, all inputs are empty and defaults produce the full Tier 3 behavior. When called from <code>ci-push.yml</code>, inputs restrict scope to Tier 2.</p> <p>String inputs, not booleans</p> <p>Use <code>type: string</code> for gate inputs, not <code>type: boolean</code>. Boolean inputs are unreliable for job-level <code>if</code> conditions when the workflow is triggered directly (inputs are empty, not <code>false</code>). Use <code>!= 'false'</code> comparisons instead.</p>"},{"location":"guides/three-tier-ci/#shared-security-workflow","title":"Shared security workflow","text":"<p>Security scanners and standards compliance are factored into a shared reusable workflow at <code>wphillipmoore/standard-actions/.github/workflows/ci-security.yml</code>.</p> <p>This provides four jobs:</p> <ul> <li><code>ci: standards-compliance</code></li> <li><code>security: codeql</code></li> <li><code>security: trivy</code></li> <li><code>security: semgrep</code></li> </ul> <p>Call it from <code>ci.yml</code>:</p> <pre><code>security-and-standards:\n  if: ${{ inputs.run-security != 'false' }}\n  uses: wphillipmoore/standard-actions/.github/workflows/ci-security.yml@develop\n  with:\n    language: ruby\n    # For Go, also set: semgrep-language: golang\n  permissions:\n    contents: read\n    security-events: write\n</code></pre> <p>Semgrep language names</p> <p>Semgrep uses <code>p/&lt;language&gt;</code> rulesets. Most languages match their common name (<code>ruby</code>, <code>python</code>, <code>java</code>) but Go requires <code>golang</code>. Use the <code>semgrep-language</code> input to override when needed.</p>"},{"location":"guides/three-tier-ci/#default-matrix-pattern","title":"Default matrix pattern","text":"<p>Use <code>fromJSON()</code> with a fallback to embed the full default matrix directly in the workflow:</p> <pre><code>strategy:\n  fail-fast: false\n  matrix:\n    version: ${{ fromJSON(inputs.versions || '[\"3.2\", \"3.3\", \"3.4\"]') }}\n</code></pre> <p>This avoids needing a separate job to compute the matrix.</p>"},{"location":"guides/three-tier-ci/#implementation-guide","title":"Implementation guide","text":""},{"location":"guides/three-tier-ci/#step-1-convert-ciyml-to-reusable-workflow","title":"Step 1: Convert ci.yml to reusable workflow","text":"<p>Add <code>workflow_call</code> alongside <code>pull_request</code> in the <code>on:</code> block. Define inputs with string types and sensible defaults.</p>"},{"location":"guides/three-tier-ci/#step-2-create-ci-pushyml","title":"Step 2: Create ci-push.yml","text":"<p>Create a thin wrapper that calls <code>ci.yml</code> with single-version inputs and security/release gates disabled.</p>"},{"location":"guides/three-tier-ci/#step-3-factor-security-into-shared-workflow","title":"Step 3: Factor security into shared workflow","text":"<p>Replace inline CodeQL, Trivy, Semgrep, and standards-compliance jobs with a single call to <code>ci-security.yml</code>.</p>"},{"location":"guides/three-tier-ci/#step-4-add-dev-scripts","title":"Step 4: Add dev scripts","text":"<p>Create <code>scripts/dev/test.sh</code>, <code>scripts/dev/lint.sh</code>, and <code>scripts/dev/audit.sh</code> following the Docker-first pattern. See Dev container images for image details.</p>"},{"location":"guides/three-tier-ci/#step-5-update-ci-gates","title":"Step 5: Update CI gates","text":"<p>Update the repository ruleset to match new check names. Key changes:</p> <ul> <li>Remove <code>ci: docs-only</code> (no longer exists)</li> <li>Replace <code>ci: standards-compliance</code> with   <code>security-and-standards / ci: standards-compliance</code></li> <li>Replace <code>security: *</code> with <code>security-and-standards / security: *</code></li> </ul> <p>Use the GitHub API to update rulesets:</p> <pre><code>gh api repos/OWNER/REPO/rulesets/RULESET_ID -X PUT --input gates.json\n</code></pre>"},{"location":"guides/three-tier-ci/#step-6-update-claudemd","title":"Step 6: Update CLAUDE.md","text":"<p>Add three-tier CI model and Docker-first testing sections to the repository's <code>CLAUDE.md</code>.</p>"},{"location":"guides/three-tier-ci/#ci-gates","title":"CI gates","text":"<p>When security and standards jobs move into the shared reusable workflow, their check names gain a <code>security-and-standards /</code> prefix:</p> <p>Old names and their replacements:</p> <ul> <li><code>ci: standards-compliance</code> \u2192   <code>security-and-standards / ci: standards-compliance</code></li> <li><code>security: codeql</code> \u2192   <code>security-and-standards / security: codeql</code></li> <li><code>security: trivy</code> \u2192   <code>security-and-standards / security: trivy</code></li> <li><code>security: semgrep</code> \u2192   <code>security-and-standards / security: semgrep</code></li> </ul> <p>Jobs that remain inline keep their names unchanged:</p> <ul> <li><code>ci: dependency-audit</code></li> <li><code>release: gates</code></li> <li><code>test: unit (&lt;version&gt;)</code></li> <li><code>test: integration (&lt;version&gt;)</code></li> </ul>"},{"location":"guides/three-tier-ci/#dev-container-images","title":"Dev container images","text":"<p>Published to <code>ghcr.io/wphillipmoore/dev-&lt;language&gt;:&lt;version&gt;</code> from the <code>docker/</code> directory in this repository.</p>"},{"location":"guides/three-tier-ci/#available-images","title":"Available images","text":"<p><code>dev-ruby</code> (3.2, 3.3, 3.4) :   Base: <code>ruby:&lt;v&gt;-slim</code>. Includes build-essential,     git, curl, bundler.</p> <p><code>dev-python</code> (3.12, 3.13, 3.14) :   Base: <code>python:&lt;v&gt;-slim</code>. Includes git, curl, uv.</p> <p><code>dev-java</code> (17, 21) :   Base: <code>eclipse-temurin:&lt;v&gt;-jdk</code>. Includes git, curl.</p> <p><code>dev-go</code> (1.25, 1.26) :   Base: <code>golang:&lt;v&gt;</code>. Includes golangci-lint,     govulncheck, go-licenses, gocyclo.</p>"},{"location":"guides/three-tier-ci/#building-locally","title":"Building locally","text":"<pre><code>cd ../standard-tooling\ndocker/build.sh\n</code></pre> <p>This builds all images. Individual images can be built with:</p> <pre><code>docker build --build-arg RUBY_VERSION=3.4 -t dev-ruby:3.4 docker/ruby/\n</code></pre>"},{"location":"guides/three-tier-ci/#publishing","title":"Publishing","text":"<p>Images are published automatically when files under <code>docker/</code> change on the <code>develop</code> or <code>main</code> branches via <code>.github/workflows/docker-publish.yml</code>.</p>"},{"location":"guides/three-tier-ci/#design-principles","title":"Design principles","text":"<ul> <li>Thin images \u2014 language runtime + package manager + git/curl</li> <li>Project-managed dependencies \u2014 tools come from lockfiles at   container startup (e.g., <code>bundle install</code>, <code>uv sync</code>, <code>go install</code>)</li> <li>No host requirements \u2014 Docker is the only prerequisite for   local development</li> </ul>"},{"location":"guides/validation-matrix/","title":"Validation Matrix","text":"<p>This page maps every validation check to where it runs, its trigger, and its exit codes.</p>"},{"location":"guides/validation-matrix/#check-summary","title":"Check Summary","text":"Check Hook CI Script Branch naming Yes -- <code>pre-commit</code> Conventional Commits (single) Yes -- <code>commit-message</code> Repository profile -- Yes <code>repo-profile</code> Markdown standards -- Yes <code>markdown-standards</code> PR issue linkage -- Yes <code>pr-issue-linkage</code> Shellcheck -- Yes CI workflow step"},{"location":"guides/validation-matrix/#local-hooks","title":"Local Hooks","text":""},{"location":"guides/validation-matrix/#pre-commit","title":"pre-commit","text":"<p>Trigger: Every <code>git commit</code></p> Check Error Message Fix Detached HEAD <code>detached HEAD is not allowed</code> Create a branch Protected branch <code>direct commits...forbidden</code> Create a feature branch Bad prefix <code>branch name must use...</code> Rename branch Missing issue <code>must include a repo issue</code> Rename to <code>type/123-desc</code>"},{"location":"guides/validation-matrix/#commit-msg","title":"commit-msg","text":"<p>Trigger: Every <code>git commit</code> (after pre-commit)</p> Check Error Message Fix Bad format <code>does not follow Conventional Commits</code> Use <code>st-commit</code>"},{"location":"guides/validation-matrix/#ci-checks","title":"CI Checks","text":""},{"location":"guides/validation-matrix/#repo-profile","title":"repo-profile","text":"<p>Trigger: PR opened or updated</p> <p>Validates <code>docs/repository-standards.md</code> has all six required attributes.</p>"},{"location":"guides/validation-matrix/#markdown-standards","title":"markdown-standards","text":"<p>Trigger: PR opened or updated</p> <p>Runs markdownlint on all markdown files. Structural checks (single H1, TOC, heading hierarchy) apply to standard docs only -- not doc-site pages or CHANGELOG.md.</p>"},{"location":"guides/validation-matrix/#pr-issue-linkage","title":"pr-issue-linkage","text":"<p>Trigger: PR opened or updated</p> <p>Validates the PR body contains <code>Fixes #N</code>, <code>Closes #N</code>, <code>Resolves #N</code>, or <code>Ref #N</code>.</p>"},{"location":"guides/validation-matrix/#exit-code-reference","title":"Exit Code Reference","text":"Code Meaning Scripts 0 Success All scripts 1 Validation failure All scripts 2 Usage error Most lint scripts (missing args or file)"},{"location":"reference/","title":"Script Reference","text":"<p>Standard-tooling provides two categories of tools: Python CLI tools installed as <code>st-*</code> console scripts, and bash validators consumed via PATH.</p>"},{"location":"reference/#python-cli-tools","title":"Python CLI Tools","text":"Tool Purpose st-commit Standards-compliant commit wrapper st-submit-pr Standards-compliant PR submission wrapper st-prepare-release Automated release preparation st-finalize-repo Post-merge repository cleanup st-validate-local Local validation driver"},{"location":"reference/#bash-validators","title":"Bash Validators","text":"Script Purpose commit-message Single commit Conventional Commits validation repo-profile Repository profile attribute validation markdown-standards Markdown linting and structural checks pr-issue-linkage PR body issue linkage validation"},{"location":"reference/#git-hooks","title":"Git Hooks","text":"Hook Purpose pre-commit Branch naming enforcement commit-msg Commit message validation"},{"location":"reference/#validation-drivers","title":"Validation Drivers","text":"<p>The following bash scripts orchestrate language-specific local validation and are consumed via PATH:</p> Script Purpose <code>validate-local-common</code> Shared checks (shellcheck, markdownlint) <code>validate-local-python</code> Python-specific validation <code>validate-local-go</code> Go-specific validation <code>validate-local-java</code> Java-specific validation <p>These are called by <code>st-validate-local</code> based on the <code>primary_language</code> in the repository profile.</p>"},{"location":"reference/dev/commit/","title":"st-commit","text":"<p>Installed as: <code>st-commit</code> (Python console script)</p> <p>Source: <code>src/standard_tooling/commit.py</code></p> <p>Wrapper that constructs standards-compliant commit messages with correct Conventional Commits format and Co-Authored-By trailers.</p> <p>Required for AI agents</p> <p>AI agents must use this tool instead of raw <code>git commit</code>. The tool resolves the correct co-author identity automatically.</p>"},{"location":"reference/dev/commit/#usage","title":"Usage","text":"<pre><code>st-commit \\\n  --type TYPE --message MESSAGE --agent AGENT [options]\n</code></pre>"},{"location":"reference/dev/commit/#arguments","title":"Arguments","text":"Argument Required Description <code>--type</code> Yes Conventional commit type <code>--message</code> Yes Commit description <code>--agent</code> Yes AI tool identity: <code>claude</code> or <code>codex</code> <code>--scope</code> No Conventional commit scope <code>--body</code> No Detailed commit body"},{"location":"reference/dev/commit/#allowed-types","title":"Allowed Types","text":"<p><code>feat</code>, <code>fix</code>, <code>docs</code>, <code>style</code>, <code>refactor</code>, <code>test</code>, <code>chore</code>, <code>ci</code>, <code>build</code></p>"},{"location":"reference/dev/commit/#examples","title":"Examples","text":"<pre><code># Feature with scope\nst-commit \\\n  --type feat --scope lint \\\n  --message \"add new check\" --agent claude\n\n# Bug fix\nst-commit \\\n  --type fix \\\n  --message \"correct regex pattern\" --agent claude\n\n# Documentation with body\nst-commit \\\n  --type docs --message \"update README\" \\\n  --body \"Expanded usage section\" --agent claude\n</code></pre>"},{"location":"reference/dev/commit/#behavior","title":"Behavior","text":"<ol> <li>Validates all required arguments.</li> <li>Reads <code>docs/repository-standards.md</code> to find the approved    co-author identity matching the <code>--agent</code> value.</li> <li>Verifies staged changes exist.</li> <li>Constructs the commit message in a temporary file.</li> <li>Runs <code>git commit --file</code> (which triggers the <code>commit-msg</code> hook    for validation).</li> </ol>"},{"location":"reference/dev/commit/#exit-codes","title":"Exit Codes","text":"Code Meaning 0 Commit created successfully 1 Validation failure or missing identity"},{"location":"reference/dev/finalize-repo/","title":"st-finalize-repo","text":"<p>Installed as: <code>st-finalize-repo</code> (Python console script)</p> <p>Source: <code>src/standard_tooling/finalize_repo.py</code></p> <p>Cleans up a repository after a PR merge: switches to the target branch, fast-forward pulls, deletes merged local branches, and prunes remote tracking references.</p>"},{"location":"reference/dev/finalize-repo/#usage","title":"Usage","text":"<pre><code>st-finalize-repo [--target-branch BRANCH] [--dry-run]\n</code></pre>"},{"location":"reference/dev/finalize-repo/#arguments","title":"Arguments","text":"Argument Description <code>--target-branch</code> Branch to switch to (default: <code>develop</code>) <code>--dry-run</code> Show what would be done without making changes"},{"location":"reference/dev/finalize-repo/#behavior","title":"Behavior","text":""},{"location":"reference/dev/finalize-repo/#1-switch-to-target-branch","title":"1. Switch to Target Branch","text":"<p>Checks out the target branch (default: <code>develop</code>).</p>"},{"location":"reference/dev/finalize-repo/#2-fast-forward-pull","title":"2. Fast-Forward Pull","text":"<p>Fetches and fast-forward merges <code>origin/{target}</code>.</p>"},{"location":"reference/dev/finalize-repo/#3-delete-merged-branches","title":"3. Delete Merged Branches","text":"<p>Deletes local branches that have been merged into the target branch. Eternal branches are protected from deletion based on the <code>branching_model</code>:</p> Branching Model Protected Branches <code>docs-single-branch</code> <code>develop</code>, <code>gh-pages</code> <code>library-release</code> <code>develop</code>, <code>main</code>, <code>gh-pages</code> <code>application-promotion</code> <code>develop</code>, <code>release</code>, <code>main</code>, <code>gh-pages</code>"},{"location":"reference/dev/finalize-repo/#4-prune-remote-references","title":"4. Prune Remote References","text":"<p>Runs <code>git remote prune origin</code> to clean up stale remote-tracking branches.</p>"},{"location":"reference/dev/finalize-repo/#exit-codes","title":"Exit Codes","text":"Code Meaning 0 Finalization complete 1 Unrecognized branching model"},{"location":"reference/dev/prepare-release/","title":"st-prepare-release","text":"<p>Installed as: <code>st-prepare-release</code> (Python console script)</p> <p>Source: <code>src/standard_tooling/prepare_release.py</code></p> <p>Automates release preparation for library repositories: creates a release branch, generates the changelog, creates a PR to main, and enables auto-merge.</p>"},{"location":"reference/dev/prepare-release/#usage","title":"Usage","text":"<pre><code>st-prepare-release --issue 42\n</code></pre>"},{"location":"reference/dev/prepare-release/#arguments","title":"Arguments","text":"Argument Required Description <code>--issue</code> Yes GitHub issue number for release tracking"},{"location":"reference/dev/prepare-release/#prerequisites","title":"Prerequisites","text":"<ul> <li>Must be on the <code>develop</code> branch</li> <li>Working tree must be clean</li> <li>Local <code>develop</code> must match <code>origin/develop</code></li> <li>Required tools: <code>gh</code>, <code>git-cliff</code>, <code>markdownlint</code></li> </ul>"},{"location":"reference/dev/prepare-release/#ecosystem-detection","title":"Ecosystem Detection","text":"<p>The tool auto-detects the project ecosystem to find the version:</p> Ecosystem Version Source Python <code>pyproject.toml</code> Maven <code>pom.xml</code> Go <code>**/version.go</code> VERSION file <code>VERSION</code> (fallback)"},{"location":"reference/dev/prepare-release/#release-steps","title":"Release Steps","text":"<ol> <li>Precondition checks -- verifies branch, clean tree, and    tool availability.</li> <li>Create release branch -- <code>release/{version}</code> from current    develop HEAD.</li> <li>Merge main -- incorporates prior release history to prevent    changelog conflicts. Uses <code>-X ours</code> for auto-resolution.</li> <li>Generate changelog -- runs <code>git-cliff</code> with a boundary tag,    validates with markdownlint.</li> <li>Push branch -- pushes <code>release/{version}</code> to origin.</li> <li>Create PR -- creates a PR targeting <code>main</code> with    <code>Ref #{issue}</code> linkage.</li> <li>Enable auto-merge -- configures merge (not squash) strategy.</li> <li>Return to develop -- checks out develop after completion.</li> </ol>"},{"location":"reference/dev/prepare-release/#exit-codes","title":"Exit Codes","text":"Code Meaning 0 Release preparation complete Non-zero Precondition failure or tool error"},{"location":"reference/dev/submit-pr/","title":"st-submit-pr","text":"<p>Installed as: <code>st-submit-pr</code> (Python console script)</p> <p>Source: <code>src/standard_tooling/submit_pr.py</code></p> <p>Wrapper that creates standards-compliant pull requests with proper issue linkage, testing sections, and auto-merge configuration.</p> <p>Required for AI agents</p> <p>AI agents must use this tool instead of raw <code>gh pr create</code>. The tool populates the PR template and configures auto-merge automatically.</p>"},{"location":"reference/dev/submit-pr/#usage","title":"Usage","text":"<pre><code>st-submit-pr \\\n  --issue NUMBER --summary TEXT [options]\n</code></pre>"},{"location":"reference/dev/submit-pr/#arguments","title":"Arguments","text":"Argument Required Description <code>--issue</code> Yes Issue number or cross-repo ref <code>--summary</code> Yes One-line PR summary <code>--linkage</code> No Linkage keyword (default: <code>Fixes</code>) <code>--title</code> No PR title (default: last commit subject) <code>--notes</code> No Additional notes for the PR <code>--dry-run</code> No Print PR body without executing"},{"location":"reference/dev/submit-pr/#linkage-keywords","title":"Linkage Keywords","text":"<p><code>Fixes</code>, <code>Closes</code>, <code>Resolves</code>, <code>Ref</code></p>"},{"location":"reference/dev/submit-pr/#examples","title":"Examples","text":"<pre><code># Standard PR\nst-submit-pr \\\n  --issue 42 --summary \"Add new lint check for X\"\n\n# PR with Ref linkage\nst-submit-pr \\\n  --issue 42 --linkage Ref \\\n  --summary \"Update docs\"\n\n# Dry run to preview\nst-submit-pr \\\n  --issue 42 --summary \"Fix regex bug\" --dry-run\n</code></pre>"},{"location":"reference/dev/submit-pr/#behavior","title":"Behavior","text":"<ol> <li>Validates arguments and issue reference format.</li> <li>Detects target branch and merge strategy from the current    branch:<ul> <li><code>release/*</code> branches target <code>main</code> with merge strategy</li> <li>All other branches target <code>develop</code> with squash strategy</li> </ul> </li> <li>Reads the testing section from    <code>.github/pull_request_template.md</code>.</li> <li>Pushes the branch to origin.</li> <li>Creates the PR via <code>gh pr create</code>.</li> <li>Enables auto-merge with the detected strategy.</li> </ol>"},{"location":"reference/dev/submit-pr/#exit-codes","title":"Exit Codes","text":"Code Meaning 0 PR created and auto-merge enabled 1 Validation failure"},{"location":"reference/dev/validate-local/","title":"st-validate-local","text":"<p>Installed as: <code>st-validate-local</code> (Python console script)</p> <p>Source: <code>src/standard_tooling/validate_local.py</code></p> <p>Shared driver for pre-PR local validation. Orchestrates common checks and language-specific validation based on the repository profile.</p>"},{"location":"reference/dev/validate-local/#usage","title":"Usage","text":"<pre><code>st-validate-local\n</code></pre> <p>Run from the repository root. No arguments required.</p>"},{"location":"reference/dev/validate-local/#behavior","title":"Behavior","text":"<p>The tool reads <code>primary_language</code> from <code>docs/repository-standards.md</code> and runs up to three validation stages:</p>"},{"location":"reference/dev/validate-local/#1-common-checks-always","title":"1. Common Checks (always)","text":"<p>Runs <code>validate-local-common</code> (resolved via PATH). This script contains checks shared across all repositories (markdown linting, shellcheck, repo-profile validation).</p>"},{"location":"reference/dev/validate-local/#2-language-specific-checks","title":"2. Language-Specific Checks","text":"<p>If <code>primary_language</code> is set and not <code>none</code>, runs the corresponding validation script (resolved via PATH):</p> Language Script <code>python</code> <code>validate-local-python</code> <code>go</code> <code>validate-local-go</code> <code>java</code> <code>validate-local-java</code>"},{"location":"reference/dev/validate-local/#3-custom-checks","title":"3. Custom Checks","text":"<p>Runs <code>validate-local-custom</code> if present on PATH or at <code>scripts/bin/validate-local-custom</code> in the repository. This is a repo-specific escape hatch for validation that does not fit the common or language-specific scripts.</p> <p>Note</p> <p><code>validate-local-custom</code> is not part of standard-tooling. Consuming repos create and maintain it in their own <code>scripts/bin/</code> directory.</p>"},{"location":"reference/dev/validate-local/#exit-codes","title":"Exit Codes","text":"Code Meaning 0 All validation stages passed Non-zero One or more stages failed"},{"location":"reference/hooks/commit-msg/","title":"commit-msg","text":"<p>Path: <code>scripts/lib/git-hooks/commit-msg</code></p> <p>Validates commit messages on every commit when git hooks are configured.</p>"},{"location":"reference/hooks/commit-msg/#behavior","title":"Behavior","text":"<p>The hook calls the <code>commit-message</code> validator, passing the commit message file path. The validator is resolved via PATH -- either from the repository's own <code>scripts/bin/</code> (for standard-tooling itself) or from the standard-tooling sibling checkout.</p> <p>If the validator fails, the commit is rejected.</p>"},{"location":"reference/hooks/commit-msg/#setup","title":"Setup","text":"<p>Configure git to use the standard-tooling hooks directory:</p> <pre><code># For standard-tooling itself:\ngit config core.hooksPath scripts/lib/git-hooks\n\n# For consuming repos (sibling checkout):\ngit config core.hooksPath ../standard-tooling/scripts/lib/git-hooks\n</code></pre>"},{"location":"reference/hooks/commit-msg/#exit-codes","title":"Exit Codes","text":"Code Meaning 0 Commit message is valid 1 Validation failure"},{"location":"reference/hooks/pre-commit/","title":"pre-commit","text":"<p>Path: <code>scripts/lib/git-hooks/pre-commit</code></p> <p>Enforces branch naming conventions before allowing a commit. Reads the <code>branching_model</code> attribute from <code>docs/repository-standards.md</code> to determine allowed branch prefixes.</p>"},{"location":"reference/hooks/pre-commit/#checks","title":"Checks","text":"<p>The hook runs five checks in order:</p>"},{"location":"reference/hooks/pre-commit/#1-detached-head","title":"1. Detached HEAD","text":"<p>Commits on a detached HEAD are blocked unconditionally.</p>"},{"location":"reference/hooks/pre-commit/#2-protected-branch","title":"2. Protected Branch","text":"<p>Direct commits to <code>develop</code>, <code>release</code>, and <code>main</code> are forbidden.</p>"},{"location":"reference/hooks/pre-commit/#3-branching-model-detection","title":"3. Branching Model Detection","text":"<p>Reads <code>branching_model</code> from <code>docs/repository-standards.md</code>. If not found, falls back to <code>feature/*</code> and <code>bugfix/*</code> with a warning.</p>"},{"location":"reference/hooks/pre-commit/#4-branch-prefix-validation","title":"4. Branch Prefix Validation","text":"<p>Allowed prefixes depend on the branching model:</p> Branching Model Allowed Prefixes <code>docs-single-branch</code> <code>feature/*</code>, <code>bugfix/*</code>, <code>chore/*</code> <code>application-promotion</code> <code>feature</code>, <code>bugfix</code>, <code>hotfix</code>, <code>chore</code>, <code>promo</code> <code>library-release</code> <code>feature</code>, <code>bugfix</code>, <code>hotfix</code>, <code>chore</code>, <code>release</code>"},{"location":"reference/hooks/pre-commit/#5-issue-number-naming","title":"5. Issue Number Naming","text":"<p>Work branches (<code>feature/*</code>, <code>bugfix/*</code>, <code>hotfix/*</code>, <code>chore/*</code>) must include a repository issue number:</p> <pre><code>{type}/{issue}-{description}\n</code></pre> <p>Example: <code>feature/42-add-caching</code></p> <p><code>release/*</code> and <code>promotion/*</code> branches are exempt from this check because they are created by automated workflows.</p>"},{"location":"reference/hooks/pre-commit/#exit-codes","title":"Exit Codes","text":"Code Meaning 0 All checks passed 1 Validation failure"},{"location":"reference/hooks/pre-commit/#configuration","title":"Configuration","text":"<p>The hook reads <code>branching_model</code> from <code>docs/repository-standards.md</code>. No other configuration is required.</p>"},{"location":"reference/lint/commit-message/","title":"commit-message","text":"<p>Path: <code>scripts/bin/commit-message</code></p> <p>Validates that a single commit message follows the Conventional Commits specification.</p>"},{"location":"reference/lint/commit-message/#usage","title":"Usage","text":"<pre><code>commit-message &lt;commit-message-file&gt;\n</code></pre> <p>This script is typically called by the <code>commit-msg</code> git hook, not invoked directly.</p>"},{"location":"reference/lint/commit-message/#validation-rules","title":"Validation Rules","text":"<p>The subject line must match:</p> <pre><code>&lt;type&gt;(optional-scope): &lt;description&gt;\n</code></pre>"},{"location":"reference/lint/commit-message/#allowed-types","title":"Allowed Types","text":"<p><code>feat</code>, <code>fix</code>, <code>docs</code>, <code>style</code>, <code>refactor</code>, <code>test</code>, <code>chore</code>, <code>ci</code>, <code>build</code></p>"},{"location":"reference/lint/commit-message/#merge-commits","title":"Merge Commits","text":"<p>Merge commits (subject starting with \"Merge \") are allowed through without Conventional Commits validation.</p>"},{"location":"reference/lint/commit-message/#exit-codes","title":"Exit Codes","text":"Code Meaning 0 Valid commit message 1 Does not match Conventional Commits 2 Missing or invalid commit message file path"},{"location":"reference/lint/markdown-standards/","title":"markdown-standards","text":"<p>Path: <code>scripts/bin/markdown-standards</code></p> <p>Validates markdown files using markdownlint and structural checks. Applies different levels of validation depending on file location.</p>"},{"location":"reference/lint/markdown-standards/#usage","title":"Usage","text":"<pre><code>markdown-standards\n</code></pre> <p>Run from the repository root. No arguments required.</p>"},{"location":"reference/lint/markdown-standards/#file-discovery","title":"File Discovery","text":"<p>The script collects files from three sources:</p>"},{"location":"reference/lint/markdown-standards/#standard-docs-markdownlint-structural-checks","title":"Standard Docs (markdownlint + structural checks)","text":"<p>Files found in <code>docs/</code> (excluding <code>docs/sphinx/</code>, <code>docs/site/</code>, and <code>docs/announcements/</code>), plus <code>README.md</code> if it exists.</p>"},{"location":"reference/lint/markdown-standards/#doc-site-files-markdownlint-only","title":"Doc-Site Files (markdownlint only)","text":"<p>Files under <code>docs/sphinx/</code> and <code>docs/site/</code>. These are exempt from structural checks because documentation site generators (MkDocs, Sphinx) handle structure.</p>"},{"location":"reference/lint/markdown-standards/#changelogmd-markdownlint-only","title":"CHANGELOG.md (markdownlint only)","text":"<p><code>CHANGELOG.md</code> gets markdownlint but no structural checks because changelog files have different heading conventions.</p>"},{"location":"reference/lint/markdown-standards/#structural-checks","title":"Structural Checks","text":"<p>Applied only to standard docs, these checks enforce:</p> Check Rule Single H1 Exactly one <code>#</code> heading per file Table of Contents A <code>## Table of Contents</code> section must exist Heading Hierarchy No skipped heading levels <p>Code blocks (fenced with <code>```</code> or <code>~~~</code>) are excluded from structural analysis.</p>"},{"location":"reference/lint/markdown-standards/#configuration","title":"Configuration","text":"<p>Markdownlint uses <code>.markdownlint.yaml</code> at the repository root if present. Otherwise it runs with default rules.</p>"},{"location":"reference/lint/markdown-standards/#exit-codes","title":"Exit Codes","text":"Code Meaning 0 All files pass 1 One or more validation failures 2 No markdown files found, or markdownlint not installed"},{"location":"reference/lint/pr-issue-linkage/","title":"pr-issue-linkage","text":"<p>Path: <code>scripts/bin/pr-issue-linkage</code></p> <p>Validates that a pull request body contains issue linkage. Runs in CI using the GitHub event payload.</p>"},{"location":"reference/lint/pr-issue-linkage/#usage","title":"Usage","text":"<p>This script is called by CI workflows, not invoked directly. It reads the PR body from <code>$GITHUB_EVENT_PATH</code>.</p>"},{"location":"reference/lint/pr-issue-linkage/#validation-rules","title":"Validation Rules","text":"<p>The PR body must contain at least one line matching:</p> <pre><code>Fixes #123\nCloses #123\nResolves #123\nRef #123\n</code></pre> <p>Cross-repository references are also accepted:</p> <pre><code>Fixes owner/repo#123\n</code></pre> <p>The pattern allows optional leading whitespace, list markers (<code>-</code> or <code>*</code>), and an optional colon after the keyword.</p>"},{"location":"reference/lint/pr-issue-linkage/#environment","title":"Environment","text":"Variable Required Description <code>GITHUB_EVENT_PATH</code> Yes Path to the GitHub event JSON payload"},{"location":"reference/lint/pr-issue-linkage/#exit-codes","title":"Exit Codes","text":"Code Meaning 0 Valid issue linkage found 1 No issue linkage or empty PR body 2 <code>GITHUB_EVENT_PATH</code> not set or file not found"},{"location":"reference/lint/repo-profile/","title":"repo-profile","text":"<p>Path: <code>scripts/bin/repo-profile</code></p> <p>Validates that <code>docs/repository-standards.md</code> contains all required repository profile attributes with non-placeholder values.</p>"},{"location":"reference/lint/repo-profile/#usage","title":"Usage","text":"<pre><code>repo-profile\n</code></pre> <p>Run from the repository root. The script reads <code>docs/repository-standards.md</code> relative to the current directory.</p>"},{"location":"reference/lint/repo-profile/#required-attributes","title":"Required Attributes","text":"<p>The following attributes must be present and non-empty:</p> Attribute Example Values <code>repository_type</code> <code>application</code>, <code>library</code>, <code>tooling</code> <code>versioning_scheme</code> <code>semver</code>, <code>calver</code>, <code>none</code> <code>branching_model</code> <code>library-release</code>, <code>application-promotion</code> <code>release_model</code> <code>tagged-release</code>, <code>continuous-deploy</code> <code>supported_release_lines</code> <code>1</code>, <code>2</code> <code>primary_language</code> <code>python</code>, <code>go</code>, <code>java</code>, <code>shell</code>"},{"location":"reference/lint/repo-profile/#validation-rules","title":"Validation Rules","text":"<ol> <li>Presence -- each attribute must exist in the file.</li> <li>No placeholders -- values containing <code>&lt;</code>, <code>&gt;</code>, or <code>|</code> are    rejected as unfilled template placeholders.</li> </ol>"},{"location":"reference/lint/repo-profile/#format","title":"Format","text":"<p>Attributes are expected as YAML-like key-value pairs in markdown:</p> <pre><code>- repository_type: library\n- versioning_scheme: semver\n</code></pre>"},{"location":"reference/lint/repo-profile/#exit-codes","title":"Exit Codes","text":"Code Meaning 0 All required attributes present and valid 1 One or more attributes missing or placeholder 2 Profile file not found"},{"location":"releases/","title":"Release Notes","text":"Version Date 1.2.1 2026-02-23 1.2.0 2026-02-23 1.1.4 2026-02-21 1.1.3 2026-02-21 1.1.2 2026-02-21"},{"location":"releases/v1.1.2/","title":"Release 1.1.2 (2026-02-21)","text":""},{"location":"releases/v1.1.2/#bug-fixes","title":"Bug fixes","text":"<ul> <li> <p>handle empty docsite_files array with set -u The docsite_files array expansion fails with set -u (nounset) when no docs/sphinx or docs/site directories exist. Use the ${arr[@]+...} pattern to safely expand potentially empty arrays.</p> </li> <li> <p>prevent --actions-compat from leaking during self-update re-exec The actions_compat variable was initialized to \"false\" (non-empty string). During self-update re-exec, ${actions_compat:+--actions-compat} expands to --actions-compat for any non-empty value, causing the re-exec to incorrectly include the flag even when the user did not pass it.</p> </li> </ul> <p>Change the default to an empty string so the expansion correctly omits the flag when --actions-compat was not specified.</p> <ul> <li>accept cross-repo issue references in PR linkage check (#36) The regex in pr-issue-linkage.sh only matched local references (#123) but submit-pr.sh supports cross-repo references (owner/repo#123). Update the regex to accept both formats.</li> </ul>"},{"location":"releases/v1.1.2/#documentation","title":"Documentation","text":"<ul> <li> <p>add canonical source comment to repo-profile.sh Test change for end-to-end propagation validation.</p> </li> <li> <p>document release-before-sync requirement (#20) Consuming repos' CI checks tooling against the latest tagged release. Syncing from an unreleased ref causes CI failures. Added mandatory ordering to CLAUDE.md and AGENTS.md.</p> </li> <li> <p>ban MEMORY.md usage in CLAUDE.md (#32) Add auto-memory policy requiring agents to discuss behavioral rules with the human rather than storing them in unmanaged MEMORY.md files.</p> </li> <li> <p>ban heredocs in shell commands (#33) Replace soft 'prefer temp files' guidance with explicit ban on heredocs. Heredocs routinely fail due to shell escaping and waste time debugging.</p> </li> </ul>"},{"location":"releases/v1.1.2/#features","title":"Features","text":"<ul> <li> <p>add CI workflow, CLAUDE.md, and repository infrastructure (#6) Add CI with docs-only, standards-compliance (skip-sync-check), and shellcheck jobs.  Create CLAUDE.md, PR template, and .gitignore. Fix workflow filename reference in docs/repository-standards.md.</p> </li> <li> <p>add add-to-project workflow for standards project Adds a GitHub Actions workflow that automatically adds new issues to the standards GitHub Project (#4).</p> </li> <li> <p>add GitHub Project helper scripts for skill automation (#12)</p> </li> <li>feat: add GitHub Project helper scripts for skill automation</li> </ul> <p>Add standalone shell scripts in scripts/gh/ that wrap gh CLI commands for common GitHub Project operations. These eliminate ad-hoc code in skills that need to query project metadata.</p> <ul> <li>list-project-repos.sh: list unique repos linked to a project</li> <li>ensure-label.sh: idempotent label check/create</li> <li> <p>set-project-field.sh: resolve field/option names to IDs and set value</p> </li> <li> <p>add ci and build to allowed conventional commit types (#13) Update both commit-message.sh (local hook) and commit-messages.sh (CI range check) to accept ci: and build: prefixes, aligning with the broader Conventional Commits specification.</p> </li> <li> <p>add commit and PR submission wrapper scripts (#17) Wrapper scripts that construct standards-compliant commit messages and PR bodies programmatically, eliminating agent compliance failures for Co-Authored-By trailers and issue linkage.</p> </li> <li> <p>support cross-repo issue references (#23)</p> </li> <li> <p>add VERSION file detector to prepare_release.py (#27) Adds detect_version_file() as a fallback detector. Validates semver format (MAJOR.MINOR.PATCH). Also adds VERSION file for this repo.</p> </li> <li> <p>add category prefixes to CI job names (#31) Standardize job display names with ci: category prefix so checks cluster naturally in the GitHub status list.</p> </li> <li> <p>add validate_local.sh dispatch architecture (#34) Shared driver reads primary_language from repo profile and dispatches to common, language-specific, and custom validation scripts. Adds validate_local.sh, validate_local_common.sh, validate_local_python.sh, validate_local_go.sh, validate_local_java.sh. Updates repo-profile.sh to validate primary_language field. Updates sync-tooling.sh MANAGED_FILES.</p> </li> <li> <p>validate issue-linked branch names in pre-commit hook (#44) Feature, bugfix, and hotfix branches must follow {type}/{issue}-{description} format. Release branches are exempt (automated by publish workflow).</p> </li> <li> <p>add publish workflow for automated tagging and version bumps (#46)</p> </li> <li>chore: bump version to 1.1.2</li> </ul>"},{"location":"releases/v1.1.3/","title":"Release 1.1.3 (2026-02-21)","text":""},{"location":"releases/v1.1.3/#bug-fixes","title":"Bug fixes","text":"<ul> <li>strip ^{} suffix from dereferenced tags in sync-tooling.sh (#51)</li> </ul>"},{"location":"releases/v1.1.4/","title":"Release 1.1.4 (2026-02-21)","text":""},{"location":"releases/v1.1.4/#bug-fixes","title":"Bug fixes","text":"<ul> <li> <p>fix CHANGELOG.md formatting for markdownlint compliance Add H1 heading, fix blank lines around sections, remove emoji prefixes from heading names. Enable siblings_only for MD024 to allow repeated subsection names across changelog versions.</p> </li> <li> <p>fix CHANGELOG.md formatting for markdownlint compliance</p> </li> <li>fix CHANGELOG.md formatting for markdownlint compliance</li> <li>fix CHANGELOG.md formatting for markdownlint compliance</li> <li>validate CHANGELOG.md with markdownlint before committing (#55)</li> <li> <p>fix: add cliff.toml for markdownlint-compliant changelog generation</p> </li> <li> <p>allow merge commits through commit-msg hook (#57)</p> </li> </ul>"},{"location":"releases/v1.1.4/#features","title":"Features","text":"<ul> <li>annotate synced scripts with provenance comments (#58)</li> </ul>"},{"location":"releases/v1.2.0/","title":"Release 1.2.0 (2026-02-23)","text":""},{"location":"releases/v1.2.0/#bug-fixes","title":"Bug fixes","text":"<ul> <li>update add-to-project action to v1.0.2 (#64)</li> <li>read version from pyproject.toml in publish and docs workflows (#82) The v1.2.0 release merged to main but both post-merge workflows failed because they read from a VERSION file that no longer exists. Update publish.yml and docs.yml to use tomllib-based version extraction from pyproject.toml, matching the pattern used by mq-rest-admin-python. Also add setup-uv step for post-bump uv lock.</li> </ul>"},{"location":"releases/v1.2.0/#documentation","title":"Documentation","text":"<ul> <li>document git hooks and validation rules (#71)</li> <li> <p>add MkDocs documentation site (#72) Add MkDocs/mike documentation site matching sibling repos pattern. Includes mkdocs.yml with Material theme, docs deployment workflow, 19 content pages covering all managed scripts, guides for consuming repos, validation matrix, and release workflow.</p> </li> <li> <p>update documentation site for PATH-based architecture (#79) Rewrite all documentation pages to reflect the restructuring from a sync-tooling model to PATH-based consumption. Delete obsolete pages (co-author, commit-messages range validator, sync-tooling). Update all script paths, tool names, and consumption instructions.</p> </li> </ul>"},{"location":"releases/v1.2.0/#features","title":"Features","text":"<ul> <li>add chore/ as allowed branch prefix in pre-commit hook (#66)</li> <li> <p>restructure as Python package with PATH-based consumption (#73) Replace copy-and-sync model with checkout-and-PATH consumption. CLI tools become st-* Python entry points, bash validators move to scripts/bin/ (no .sh extensions), git hooks move to scripts/lib/git-hooks/. Drop co-author.sh, commit-messages.sh, sync-tooling.sh.</p> </li> <li> <p>add commit-messages range validator for CI (#76) Port the commit-messages validator (range-based, for CI PR validation) from standard-actions back to scripts/bin/. This was dropped in the restructuring (#73) but is still needed by the standards-compliance action. Unlike the existing commit-message (singular) which validates a single file for the git hook, this script validates all non-merge commits in a base..head range.</p> </li> </ul>"},{"location":"releases/v1.2.0/#refactoring","title":"Refactoring","text":"<ul> <li>remove commit-messages range validator (#77) The CI commit message validation is being removed from the standards-compliance action. The git commit-msg hook provides sufficient enforcement at commit time. This removes the range-based validator added in the previous commit.</li> </ul>"},{"location":"releases/v1.2.0/#testing","title":"Testing","text":"<ul> <li>achieve 100% line and branch coverage for all Python modules (#74) Add comprehensive tests for all lib and bin modules. Configure coverage exclusions for main guards and TYPE_CHECKING blocks. Reformat source with ruff format for CI consistency.</li> </ul>"},{"location":"releases/v1.2.1/","title":"Release 1.2.0 (2026-02-23)","text":""},{"location":"releases/v1.2.1/#bug-fixes","title":"Bug fixes","text":"<ul> <li>update add-to-project action to v1.0.2 (#64)</li> <li>read version from pyproject.toml in publish and docs workflows (#82) The v1.2.0 release merged to main but both post-merge workflows failed because they read from a VERSION file that no longer exists. Update publish.yml and docs.yml to use tomllib-based version extraction from pyproject.toml, matching the pattern used by mq-rest-admin-python. Also add setup-uv step for post-bump uv lock.</li> </ul>"},{"location":"releases/v1.2.1/#documentation","title":"Documentation","text":"<ul> <li>document git hooks and validation rules (#71)</li> <li> <p>add MkDocs documentation site (#72) Add MkDocs/mike documentation site matching sibling repos pattern. Includes mkdocs.yml with Material theme, docs deployment workflow, 19 content pages covering all managed scripts, guides for consuming repos, validation matrix, and release workflow.</p> </li> <li> <p>update documentation site for PATH-based architecture (#79) Rewrite all documentation pages to reflect the restructuring from a sync-tooling model to PATH-based consumption. Delete obsolete pages (co-author, commit-messages range validator, sync-tooling). Update all script paths, tool names, and consumption instructions.</p> </li> </ul>"},{"location":"releases/v1.2.1/#features","title":"Features","text":"<ul> <li>add chore/ as allowed branch prefix in pre-commit hook (#66)</li> <li> <p>restructure as Python package with PATH-based consumption (#73) Replace copy-and-sync model with checkout-and-PATH consumption. CLI tools become st-* Python entry points, bash validators move to scripts/bin/ (no .sh extensions), git hooks move to scripts/lib/git-hooks/. Drop co-author.sh, commit-messages.sh, sync-tooling.sh.</p> </li> <li> <p>add commit-messages range validator for CI (#76) Port the commit-messages validator (range-based, for CI PR validation) from standard-actions back to scripts/bin/. This was dropped in the restructuring (#73) but is still needed by the standards-compliance action. Unlike the existing commit-message (singular) which validates a single file for the git hook, this script validates all non-merge commits in a base..head range.</p> </li> </ul>"},{"location":"releases/v1.2.1/#refactoring","title":"Refactoring","text":"<ul> <li>remove commit-messages range validator (#77) The CI commit message validation is being removed from the standards-compliance action. The git commit-msg hook provides sufficient enforcement at commit time. This removes the range-based validator added in the previous commit.</li> </ul>"},{"location":"releases/v1.2.1/#testing","title":"Testing","text":"<ul> <li>achieve 100% line and branch coverage for all Python modules (#74) Add comprehensive tests for all lib and bin modules. Configure coverage exclusions for main guards and TYPE_CHECKING blocks. Reformat source with ruff format for CI consistency.</li> </ul>"}]}